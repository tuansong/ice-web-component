import * as Vue from 'https://unpkg.com/vue@3/dist/vue.runtime.esm-browser.prod.js';
import { loadModule } from 'https://cdn.jsdelivr.net/npm/vue3-sfc-loader/dist/vue3-sfc-loader.esm.js';

(async () => {
  const componentSource = `
%3Ctemplate%3E%0A%20%20%3Cdiv%0A%20%20%20%20class=%22ice_video%22%0A%20%20%20%20:class=%22%5BvideoStyleClass%5D%22%0A%20%20%3E%0A%20%20%20%20%3Cvideo%0A%20%20%20%20%20%20v-if=%22isVideoUploaded%22%0A%20%20%20%20%20%20id=%22ice-video%22%0A%20%20%20%20%20%20ref=%22video%22%0A%20%20%20%20%20%20playsinline%0A%20%20%20%20%20%20:src=%22videoSource%22%0A%20%20%20%20%20%20:autoplay=%22autoplay%22%0A%20%20%20%20%20%20:loop=%22loop%22%0A%20%20%20%20%20%20:muted=%22muted%22%0A%20%20%20%20%20%20:controls=%22showControls%22%0A%20%20%20%20%20%20:poster=%22videoThumbnail%22%0A%20%20%20%20%20%20:style=%22inlineStyles%22%0A%20%20%20%20%20%20@pause=%22pause%22%0A%20%20%20%20%20%20@click=%22play%22%0A%20%20%20%20/%3E%0A%20%20%20%20%3Ciframe%0A%20%20%20%20%20%20v-else%0A%20%20%20%20%20%20:src=%22videoUrl%22%0A%20%20%20%20%20%20:style=%22inlineStyles%22%0A%20%20%20%20%20%20allow=%22autoplay%22%0A%20%20%20%20%20%20title=%22%22%0A%20%20%20%20/%3E%0A%20%20%3C/div%3E%0A%3C/template%3E%0A%0A%3Cscript%3E%0Afunction%20getFlexHorizontalAlign(align)%20%7B%0A%20%20switch%20(align)%20%7B%0A%20%20%20%20case%20'left':%0A%20%20%20%20%20%20return%20'flex-start';%0A%20%20%20%20case%20'center':%0A%20%20%20%20%20%20return%20'center';%0A%20%20%20%20case%20'right':%0A%20%20%20%20%20%20return%20'flex-end';%0A%20%20%7D%0A%7D%0A%0Afunction%20getFlexVerticalAlign(align)%20%7B%0A%20%20switch%20(align)%20%7B%0A%20%20%20%20case%20'top':%0A%20%20%20%20%20%20return%20'flex-start';%0A%20%20%20%20case%20'middle':%0A%20%20%20%20%20%20return%20'center';%0A%20%20%20%20case%20'bottom':%0A%20%20%20%20%20%20return%20'flex-end';%0A%20%20%7D%0A%7D%0A%0Afunction%20getPositionFixedHorizontal(value)%20%7B%0A%20%20switch%20(value)%20%7B%0A%20%20%20%20case%20'left':%0A%20%20%20%20%20%20return%20%7B%20left:%20'0',%20transform:%20''%20%7D;%0A%20%20%20%20case%20'center':%0A%20%20%20%20%20%20return%20%7B%20left:%20'50%25',%20transform:%20'translateX(-50%25)'%20%7D;%0A%20%20%20%20case%20'right':%0A%20%20%20%20%20%20return%20%7B%20left:%20'100%25',%20translate:%20'translateX(-100%25)'%20%7D;%0A%20%20%7D%0A%7D%0A%0Afunction%20getPositionFixedVertical(value)%20%7B%0A%20%20switch%20(value)%20%7B%0A%20%20%20%20case%20'top':%0A%20%20%20%20%20%20return%20%7B%20top:%20'0',%20transform:%20''%20%7D;%0A%20%20%20%20case%20'middle':%0A%20%20%20%20%20%20return%20%7B%20top:%20'50%25',%20transform:%20'translateY(-50%25)'%20%7D;%0A%20%20%20%20case%20'bottom':%0A%20%20%20%20%20%20return%20%7B%20top:%20'100%25',%20transform:%20'translateY(-100%25)'%20%7D;%0A%20%20%7D%0A%7D%0A%0Afunction%20getBlockHorizontalAlign(value)%20%7B%0A%20%20switch%20(value)%20%7B%0A%20%20%20%20case%20'left':%0A%20%20%20%20%20%20return%20%7B%20display:%20'table',%20marginRight:%20'auto'%20%7D;%0A%20%20%20%20case%20'center':%0A%20%20%20%20%20%20return%20%7B%20display:%20'table',%20marginLeft:%20'auto',%20marginRight:%20'auto'%20%7D;%0A%20%20%20%20case%20'right':%0A%20%20%20%20%20%20return%20%7B%20display:%20'table',%20marginLeft:%20'auto'%20%7D;%0A%20%20%20%20case%20'inline':%0A%20%20%20%20%20%20return%20%7B%20display:%20'inline-block',%20verticalAlign:%20'middle'%20%7D;%0A%20%20%7D%0A%7D%0A/**%0A%20*%20Some%20props%20name%20is%20not%20native%20CSS%20name%20e.g.%20horiztonalAlign,%20verticalAlign,%20...%0A%20*%0A%20*%20This%20will%20convert%20to%20CSS%20Styles%0A%20*%0A%20*%20ICE%20Core:%0A%20*%0A%20*%20foCommonLayout%0A%20*%20foFlexLayout%0A%20*%20foFloatingLayout%0A%20*%20foImageLayout%0A%20*/%0Afunction%20buildInlineStyles(...args)%20%7B%0A%20%20const%20data%20=%20Object.assign(%7B%7D,%20...args);%0A%20%20const%20result%20=%20%7B%7D;%0A%0A%20%20for%20(const%20k%20in%20data)%20%7B%0A%20%20%20%20const%20value%20=%20data%5Bk%5D?.value%20%7C%7C%20null;%0A%0A%20%20%20%20switch%20(k)%20%7B%0A%20%20%20%20%20%20case%20'flexHorizontalAlign':%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20direction%20=%20data?.flexDirection?.value%20%7C%7C%20'column';%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(direction%20==%20'row')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result.justifyContent%20=%20getFlexHorizontalAlign(value);%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result.alignItems%20=%20getFlexHorizontalAlign(value);%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20break;%0A%20%20%20%20%20%20case%20'flexVerticalAlign':%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20direction%20=%20data?.flexDirection?.value%20%7C%7C%20'column';%0A%20%20%20%20%20%20%20%20%20%20if%20(direction%20==%20'row')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result.alignItems%20=%20getFlexVerticalAlign(value);%0A%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result.justifyContent%20=%20getFlexVerticalAlign(value);%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20break;%0A%20%20%20%20%20%20case%20'horizontalPosition':%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20position%20=%20data?.position?.value%20%7C%7C%20'';%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(position%20==%20'fixed')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20%7B%20left,%20transform%20%7D%20=%20getPositionFixedHorizontal(value);%0A%20%20%20%20%20%20%20%20%20%20%20%20result.left%20=%20left;%0A%20%20%20%20%20%20%20%20%20%20%20%20result.transform%20=%20%60$%7B(result.transform%20%7C%7C%20'')%7D%20$%7Btransform%7D%60;%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20break;%0A%20%20%20%20%20%20case%20'verticalPosition':%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20position%20=%20data?.position?.value%20%7C%7C%20'';%0A%0A%20%20%20%20%20%20%20%20%20%20if%20(position%20==%20'fixed')%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20%7B%20top,%20transform%20%7D%20=%20getPositionFixedVertical(value);%0A%20%20%20%20%20%20%20%20%20%20%20%20result.top%20=%20top;%0A%20%20%20%20%20%20%20%20%20%20%20%20result.transform%20=%20%60$%7B(result.transform%20%7C%7C%20'')%7D%20$%7Btransform%7D%60;%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20break;%0A%20%20%20%20%20%20case%20'blockHorizontalAlign':%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20styles%20=%20getBlockHorizontalAlign(value);%0A%20%20%20%20%20%20%20%20%20%20Object.assign(result,%20styles);%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20break;%0A%20%20%20%20%20%20default:%0A%20%20%20%20%20%20%20%20result%5Bk%5D%20=%20value;%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20return%20Object.entries(result).reduce((r,%20%5Bk,%20v%5D)%20=%3E%20%7B%0A%20%20%20%20if%20(v%20!=%20null)%20%7B%0A%20%20%20%20%20%20r%5Bk%5D%20=%20v;%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20r;%0A%20%20%7D,%20%7B%7D);%0A%7D%0A%0Afunction%20isExternalUrl(value)%20%7B%0A%20%20return%20value%20&&%20%5B'http',%20'//',%20'mailto'%5D.some((i)%20=%3E%20value.startsWith(i));%0A%7D%0A%0Afunction%20getFileUrl(data,%20%7B%20$config%20%7D)%20%7B%0A%20%20const%20fileUrl%20=%20$config%20?%20$config.fileUrl%20:%20window.location.origin;%0A%20%20const%20fileHost%20=%20$config%20?%20$config.fileHost%20:%20window.location.host;%0A%20%20if%20(!data)%20%7B%0A%20%20%20%20return%20'';%0A%20%20%7D%0A%0A%20%20if%20(data.image)%20%7B%0A%20%20%20%20data%20=%20data.image;%0A%20%20%7D%0A%0A%20%20let%20url%20=%20data.storePath%20%7C%7C%20data.imageUrl%20%7C%7C%20data;%0A%0A%20%20if%20(!url%20%7C%7C%20typeof%20url%20!==%20'string')%20%7B%20return%20'';%20%7D%0A%0A%20%20if%20(url.includes(';base64'))%20%7B%0A%20%20%20%20return%20url;%0A%20%20%7D%0A%0A%20%20if%20(url.startsWith('http')%20&&%20!url.startsWith(fileUrl))%20%7B%0A%20%20%20%20return%20url;%0A%20%20%7D%0A%0A%20%20if%20(url.startsWith('http')%20%7C%7C%20url.startsWith('/'))%20%7B%0A%20%20%20%20if%20(url.lastIndexOf('http')%20!=%200)%20%7B%0A%20%20%20%20%20%20const%20apiDomain%20=%20%60$%7BfileUrl%7D/%60;%0A%20%20%20%20%20%20url%20=%20url.replace(apiDomain,%20'');%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20extension%20=%20url.includes('.')%20&&%20url.substring(url.indexOf('.')%20+%201);%0A%0A%20%20%20%20if%20(extension%20&&%20extension.includes('/'))%20%7B%0A%20%20%20%20%20%20url%20=%20url.substring(0,%20url.lastIndexOf('/'));%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20url;%0A%20%20%7D%0A%0A%20%20//%20const%20protocol%20=%20'http://'%0A%20%20const%20protocol%20=%20'//';%20//%20use%20the%20current%20open%20web%20browser%20protocol%0A%0A%20%20const%20result%20=%20url.startsWith(fileHost)%20?%20%60$%7Bprotocol%7D$%7Burl%7D%60%20:%20%60$%7BfileUrl%7D/$%7Burl%7D%60;%0A%0A%20%20return%20result;%0A%7D%0A%0Afunction%20getBoxShadowStyle(styles,%20important)%20%7B%0A%20%20if%20(styles%20==%20null%20%7C%7C%20!styles?.enable)%20return%20null;%0A%0A%20%20const%20%7B%0A%20%20%20%20x,%20y,%20blur,%20spread,%20color,%20sizeUnit,%0A%20%20%7D%20=%20styles;%0A%0A%20%20const%20unit%20=%20sizeUnit%20&&%20sizeUnit.value%20?%20sizeUnit.value%20:%20'px';%0A%0A%20%20return%20%60$%7Bx%7D$%7Bunit%7D%20$%7By%7D$%7Bunit%7D%20$%7Bblur%7D$%7Bunit%7D%20$%7Bspread%7D$%7Bunit%7D%20$%7Bcolor%7D%20$%7Bimportant%20?%20'!important'%20:%20''%7D%60;%0A%7D%0A%0A/*%0A%20%20*%20Return%20a%20searching%20dom%20inside%20shadow%20root%20of%20web%20component%0A%20%20*%0A%20%20*%20@param%20%7Bnumber%7D%20id%20The%20ID%20of%20web%20component.%0A%20%20*%20@param%20%7Bstring%7D%20target%20The%20id%20or%20class%20of%20the%20searching%20element.%0A*/%0Afunction%20shadowDomSelector(id,%20target)%20%7B%0A%20%20if%20(!document)%20return%20null;%0A%0A%20%20const%20wcElement%20=%20document.getElementById(id);%0A%20%20if%20(!target)%20return%20wcElement;%0A%20%20return%20wcElement%20&&%20wcElement.shadowRoot?.querySelector(target);%0A%7D%0A%0A%0Aexport%20default%20%7B%0A%20%20description:%20'%60Video%60%20Element',%0A%20%20examples:%20%5B%0A%20%20%20%20%7B%0A%20%20%20%20%20%20docName:%20'Default%20Video',%0A%20%20%20%20%20%20videoProperties:%20%7B%0A%20%20%20%20%20%20%20%20autoplay:%20false,%0A%20%20%20%20%20%20%20%20description:%20'hello%20world',%0A%20%20%20%20%20%20%20%20displayControls:%20true,%0A%20%20%20%20%20%20%20%20loop:%20false,%0A%20%20%20%20%20%20%20%20muted:%20false,%0A%20%20%20%20%20%20%20%20option:%20%7B%20value:%20'upload',%20label:%20'Upload'%20%7D,%0A%20%20%20%20%20%20%20%20videoThumbnail:%20null,%0A%20%20%20%20%20%20%20%20videoUpload:%20null,%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20videoStyle:%20%7B%0A%20%20%20%20%20%20%20%20borderStyle:%20%7B%20enable:%20false%20%7D,%0A%20%20%20%20%20%20%20%20shadowStyle:%20%7B%0A%20%20%20%20%20%20%20%20%20%20blur:%201,%0A%20%20%20%20%20%20%20%20%20%20color:%20null,%0A%20%20%20%20%20%20%20%20%20%20enable:%20false,%0A%20%20%20%20%20%20%20%20%20%20x:%201,%0A%20%20%20%20%20%20%20%20%20%20y:%201,%0A%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%7D,%0A%20%20%20%20%7B%0A%20%20%20%20%20%20docName:%20'Video%20with%20embeded%20URL',%0A%20%20%20%20%20%20styles:%20%7B%0A%20%20%20%20%20%20%20%20height:%20'400px',%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20videoProperties:%20%7B%0A%20%20%20%20%20%20%20%20autoplay:%20false,%0A%20%20%20%20%20%20%20%20description:%20'hello%20world',%0A%20%20%20%20%20%20%20%20displayControls:%20true,%0A%20%20%20%20%20%20%20%20loop:%20false,%0A%20%20%20%20%20%20%20%20muted:%20false,%0A%20%20%20%20%20%20%20%20label:%20'https://youtu.be/VIGbEik__0Q',%0A%20%20%20%20%20%20%20%20videoUrl:%20'https://youtu.be/VIGbEik__0Q',%0A%20%20%20%20%20%20%20%20option:%20%7B%20value:%20'url',%20label:%20'Url'%20%7D,%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20videoStyle:%20%7B%0A%20%20%20%20%20%20%20%20borderStyle:%20%7B%20enable:%20false%20%7D,%0A%20%20%20%20%20%20%20%20shadowStyle:%20%7B%0A%20%20%20%20%20%20%20%20%20%20blur:%201,%0A%20%20%20%20%20%20%20%20%20%20color:%20null,%0A%20%20%20%20%20%20%20%20%20%20enable:%20false,%0A%20%20%20%20%20%20%20%20%20%20x:%201,%0A%20%20%20%20%20%20%20%20%20%20y:%201,%0A%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%7D,%0A%20%20%5D,%0A%20%20props:%20%7B%0A%20%20%20%20id:%20%7B%0A%20%20%20%20%20%20type:%20%5BString,%20Number%5D,%0A%20%20%20%20%20%20default:%20null,%0A%20%20%20%20%7D,%0A%20%20%20%20videoStyle:%20%7B%0A%20%20%20%20%20%20type:%20Object,%0A%20%20%20%20%20%20default:%20()%20=%3E%20(%7B%7D),%0A%20%20%20%20%20%20doc:%20%7B%0A%20%20%20%20%20%20%20%20hidden:%20true,%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%7D,%0A%20%20%20%20videoProperties:%20%7B%0A%20%20%20%20%20%20type:%20Object,%0A%20%20%20%20%20%20default:%20()%20=%3E%20(%7B%7D),%0A%20%20%20%20%20%20doc:%20%7B%0A%20%20%20%20%20%20%20%20options:%20%7B%0A%20%20%20%20%20%20%20%20%20%20option:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type:%20String,%0A%20%20%20%20%20%20%20%20%20%20%20%20default:%20'url',%0A%20%20%20%20%20%20%20%20%20%20%20%20doc:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20hidden:%20true,%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20videoUrl:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type:%20String,%0A%20%20%20%20%20%20%20%20%20%20%20%20default:%20'https://youtu.be/VIGbEik__0Q',%0A%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%7D,%0A%20%20%20%20layout:%20%7B%0A%20%20%20%20%20%20type:%20Object,%0A%20%20%20%20%20%20default:%20()%20=%3E%20(%7B%7D),%0A%20%20%20%20%20%20doc:%20%7B%0A%20%20%20%20%20%20%20%20hidden:%20true,%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%7D,%0A%20%20%20%20styles:%20%7B%0A%20%20%20%20%20%20type:%20Object,%0A%20%20%20%20%20%20default:%20()%20=%3E%20(%7B%7D),%0A%20%20%20%20%20%20doc:%20%7B%0A%20%20%20%20%20%20%20%20hidden:%20true,%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%7D,%0A%20%20%7D,%0A%20%20data()%20%7B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20isPlaying:%20false,%0A%20%20%20%20%7D;%0A%20%20%7D,%0A%20%20computed:%20%7B%0A%20%20%20%20videoSource()%20%7B%0A%20%20%20%20%20%20const%20videoUpload%20=%20this.videoProperties?.videoUpload;%0A%20%20%20%20%20%20return%20getFileUrl(videoUpload,%20%7B%20$config:%20this.$config%20%7D);%0A%20%20%20%20%7D,%0A%20%20%20%20videoUploadOption()%20%7B%0A%20%20%20%20%20%20const%20option%20=%20this.videoProperties?.option%20%7C%7C%20%7B%7D;%0A%20%20%20%20%20%20return%20option?.value%20%7C%7C%20'url';%0A%20%20%20%20%7D,%0A%20%20%20%20videoUrl()%20%7B%0A%20%20%20%20%20%20const%20url%20=%20this.videoProperties?.videoUrl;%0A%20%20%20%20%20%20if%20(isExternalUrl(url))%20%7B%0A%20%20%20%20%20%20%20%20return%20this.convertYoutubeEmbedUrl(url);%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20getFileUrl(url,%20%7B%20$config:%20this.$config%20%7D);%0A%20%20%20%20%7D,%0A%20%20%20%20videoThumbnail()%20%7B%0A%20%20%20%20%20%20const%20videoThumbnail%20=%20this.videoProperties?.videoThumbnail;%0A%20%20%20%20%20%20return%20getFileUrl(videoThumbnail,%20%7B%20$config:%20this.$config%20%7D)%20%7C%7C%20(!this.videoSource%20?%20'/common/img/placeholder.png'%20:%20undefined);%0A%20%20%20%20%7D,%0A%20%20%20%20videoStyleClass()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20ice_video_no_padding:%20this.isVideoUploaded%20%7C%7C%20(this.$$inEditor%20&&%20this.layout?.height),%0A%20%20%20%20%20%20%20%20ice_video_iframe:%20!this.isVideoUploaded,%0A%20%20%20%20%20%20%20%20ice_video_playing:%20this.autoplay%20%7C%7C%20this.isPlaying%20%7C%7C%20!this.isVideoUploaded,%0A%20%20%20%20%20%20%7D;%0A%20%20%20%20%7D,%0A%20%20%20%20loop()%20%7B%0A%20%20%20%20%20%20return%20this.videoProperties?.loop;%0A%20%20%20%20%7D,%0A%20%20%20%20muted()%20%7B%0A%20%20%20%20%20%20return%20this.autoplay%20?%20true%20:%20this.videoProperties?.muted;%0A%20%20%20%20%7D,%0A%20%20%20%20showControls()%20%7B%0A%20%20%20%20%20%20const%20displayControls%20=%20this.videoProperties?.displayControls;%0A%20%20%20%20%20%20if%20(this.videoUploadOption%20===%20'url')%20%7B%0A%20%20%20%20%20%20%20%20return%20displayControls;%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20this.isPlaying%20&&%20displayControls;%0A%20%20%20%20%7D,%0A%20%20%20%20autoplay()%20%7B%0A%20%20%20%20%20%20return%20this.videoProperties?.autoplay;%0A%20%20%20%20%7D,%0A%20%20%20%20inlineStyles()%20%7B%0A%20%20%20%20%20%20const%20borderStyle%20=%20this.videoStyle?.borderStyle%20%7C%7C%20%7B%7D;%0A%20%20%20%20%20%20const%20shadowStyle%20=%20this.videoStyle?.shadowStyle%20%7C%7C%20%7B%7D;%0A%20%20%20%20%20%20const%20%7B%20color,%20size%20%7D%20=%20borderStyle;%0A%20%20%20%20%20%20const%20enableBorder%20=%20borderStyle.enable%20%7C%7C%20null;%0A%0A%20%20%20%20%20%20return%20buildInlineStyles(%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20border:%20enableBorder%20&&%20%60$%7Bsize%7Dpx%20$%7Bcolor%7D%60,%0A%20%20%20%20%20%20%20%20%20%20boxShadow:%20getBoxShadowStyle(shadowStyle),%0A%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20this.styles,%0A%20%20%20%20%20%20%20%20this.layout,%0A%20%20%20%20%20%20);%0A%20%20%20%20%7D,%0A%20%20%20%20isVideoUploaded()%20%7B%0A%20%20%20%20%20%20return%20this.videoUploadOption%20===%20'upload'%20%7C%7C%20this.videoUrl%20===%20'';%0A%20%20%20%20%7D,%0A%20%20%7D,%0A%20%20methods:%20%7B%0A%20%20%20%20convertYoutubeEmbedUrl(url)%20%7B%0A%20%20%20%20%20%20if%20(url)%20%7B%0A%20%20%20%20%20%20%20%20const%20regExp%20=%20/%5E.*(youtu.be%5C/%7Cv%5C/%7Cu%5C/%5Cw%5C/%7Cembed%5C/%7Cwatch%5C?v=%7C&v=%7C%5C?v=)(%5B%5E#&?%5D*).*/;%0A%20%20%20%20%20%20%20%20const%20match%20=%20url.match(regExp);%0A%20%20%20%20%20%20%20%20const%20ENCODE_LENGTH%20=%2011;%0A%0A%20%20%20%20%20%20%20%20if%20(match%20&&%20match%5B2%5D.length%20===%20ENCODE_LENGTH)%20%7B%0A%20%20%20%20%20%20%20%20%20%20let%20youtubeLink%20=%20%60https://www.youtube.com/embed/$%7Bmatch%5B2%5D%7D?%60;%0A%20%20%20%20%20%20%20%20%20%20youtubeLink%20+=%20%60autoplay=$%7Bthis.autoplay%20?%20'1'%20:%20'0'%7D%60;%0A%20%20%20%20%20%20%20%20%20%20youtubeLink%20+=%20%60&mute=$%7Bthis.muted%20%7C%7C%20this.autoplay%20?%20'1'%20:%20'0'%7D%60;%0A%20%20%20%20%20%20%20%20%20%20this.loop%20&&%20(youtubeLink%20+=%20%60&playlist=$%7Bmatch%5B2%5D%7D&loop=1%60);%0A%20%20%20%20%20%20%20%20%20%20youtubeLink%20+=%20%60&controls=$%7Bthis.showControls%20?%20'1'%20:%20'0'%7D%60;%0A%20%20%20%20%20%20%20%20%20%20youtubeLink%20+=%20'&showinfo=0&modestbranding=1&rel=0';%0A%0A%20%20%20%20%20%20%20%20%20%20return%20youtubeLink;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20url;%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20return%20'';%0A%20%20%20%20%7D,%0A%20%20%20%20play(e)%20%7B%0A%20%20%20%20%20%20e.preventDefault();%0A%20%20%20%20%20%20e.stopPropagation();%0A%20%20%20%20%20%20const%20video%20=%20window.$nuxt%20?%20this.$refs.video%20:%20shadowDomSelector(this.id,%20'#ice-video');%0A%20%20%20%20%20%20if%20(!this.isPlaying)%20%7B%0A%20%20%20%20%20%20%20%20video.play();%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20video.pause();%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20this.isPlaying%20=%20!this.isPlaying;%0A%20%20%20%20%7D,%0A%20%20%20%20pause(e)%20%7B%0A%20%20%20%20%20%20e.preventDefault();%0A%20%20%20%20%20%20e.stopPropagation();%0A%20%20%20%20%20%20if%20(this.isPlaying)%20%7B%0A%20%20%20%20%20%20%20%20/*%20To%20hide%20controls%20in%20case%20video%20paused%20without%20clicking%20on%20it%20*/%0A%20%20%20%20%20%20%20%20this.isPlaying%20=%20false;%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D,%0A%20%20%7D,%0A%7D;%0A%3C/script%3E%0A
`

const options = {
  moduleCache: {
    vue: Vue
  },
  async getFile(url) {
    if (url == 'Video.vue') {
      return Promise.resolve(decodeURI(componentSource));
    }

    const res = await fetch(url);

    if (!res.ok) {
      throw Object.assign(new Error(res.statusText + ' ' + url), { res });
    }

    return {
      getContentData: asBinary => asBinary ? res.arrayBuffer() : res.text(),
    }
  },
  addStyle(textContent) {
    const style = Object.assign(document.createElement('style'), { textContent });
    const ref = document.head.getElementsByTagName('style')[0] || null;
    document.head.insertBefore(style, ref);
  },
}

const componentName = 'IceWebVideo'
const componentCode = Vue.defineCustomElement(await loadModule('Video.vue', options))

function kebabCase(str) {
  return str.replace(/[A-Z]+(?![a-z])|[A-Z]/g, ($, ofs) => (ofs ? '-' : '') + $.toLowerCase());
}

Vue.createApp({
  setup() {
    // Register as Web Components
    window.customElements.define(kebabCase(componentName), componentCode)
    
    return {}
  },
}).mount(document.createElement('div'));
})();