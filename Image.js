import * as Vue from 'https://unpkg.com/vue@3/dist/vue.runtime.esm-browser.prod.js';
import { loadModule } from 'https://cdn.jsdelivr.net/npm/vue3-sfc-loader/dist/vue3-sfc-loader.esm.js';

(async () => {
  const componentSource = `
%3Ctemplate%3E%0A%20%20%3Cdiv%0A%20%20%20%20v-ice:prop-bind=%22'image'%22%0A%20%20%20%20v-ice:prop-type=%22'image'%22%0A%20%20%20%20:style=%22divStyle%22%0A%20%20%20%20class=%22ice_image%22%0A%20%20%3E%0A%20%20%20%20%3Cslot%20/%3E%0A%20%20%20%20%3Cimg%0A%20%20%20%20%20%20v-if=%22!imgSrc%22%0A%20%20%20%20%20%20:src=%22defaultImage%22%0A%20%20%20%20%20%20class=%22ice_image_el%22%0A%20%20%20%20%20%20:style=%22placeholderStyles%22%0A%20%20%20%20%20%20:alt=%22imgAlt%22%0A%20%20%20%20%20%20@load=%22onImageLoad($event)%22%0A%20%20%20%20%20%20@error=%22onImageError($event)%22%0A%20%20%20%20%3E%0A%20%20%20%20%3Cimg%0A%20%20%20%20%20%20v-else-if=%22!hrefLink%22%0A%20%20%20%20%20%20:src=%22imgSrc%22%0A%20%20%20%20%20%20:class=%22imgClass%22%0A%20%20%20%20%20%20:style=%22imgStyle%22%0A%20%20%20%20%20%20:alt=%22imgAlt%22%0A%20%20%20%20%20%20@click.prevent=%22openModal()%22%0A%20%20%20%20%20%20@load=%22onImageLoad($event)%22%0A%20%20%20%20%20%20@error=%22onImageError($event)%22%0A%20%20%20%20%3E%0A%20%20%20%20%3Cimg%0A%20%20%20%20%20%20v-else-if=%22isRoutePush%22%0A%20%20%20%20%20%20:src=%22imgSrc%22%0A%20%20%20%20%20%20:class=%22imgClass%22%0A%20%20%20%20%20%20:style=%22imgStyle%22%0A%20%20%20%20%20%20:alt=%22imgAlt%22%0A%20%20%20%20%20%20@click.prevent=%22routePush()%22%0A%20%20%20%20%20%20@load=%22onImageLoad($event)%22%0A%20%20%20%20%20%20@error=%22onImageError($event)%22%0A%20%20%20%20%3E%0A%20%20%20%20%3Ca%0A%20%20%20%20%20%20v-else%0A%20%20%20%20%20%20:href=%22hrefLink%22%0A%20%20%20%20%20%20:target=%22hrefLinkTarget%22%0A%20%20%20%20%3E%0A%20%20%20%20%20%20%3Cimg%0A%20%20%20%20%20%20%20%20v-if=%22imgSrc%22%0A%20%20%20%20%20%20%20%20:src=%22imgSrc%22%0A%20%20%20%20%20%20%20%20:class=%22imgClass%22%0A%20%20%20%20%20%20%20%20:style=%22imgStyle%22%0A%20%20%20%20%20%20%20%20:alt=%22imgAlt%22%0A%20%20%20%20%20%20%20%20@load=%22onImageLoad($event)%22%0A%20%20%20%20%20%20%20%20@error=%22onImageError($event)%22%0A%20%20%20%20%20%20%3E%0A%20%20%20%20%3C/a%3E%0A%20%20%3C/div%3E%0A%3C/template%3E%0A%0A%3Cscript%3E%0Afunction%20getFileUrl(data,%20%7B%20$config%20%7D)%20%7B%0A%20%20const%20fileUrl%20=%20$config%20?%20$config.fileUrl%20:%20window.location.origin;%0A%20%20const%20fileHost%20=%20$config%20?%20$config.fileHost%20:%20window.location.host;%0A%20%20if%20(!data)%20%7B%0A%20%20%20%20return%20'';%0A%20%20%7D%0A%0A%20%20if%20(data.image)%20%7B%0A%20%20%20%20data%20=%20data.image;%0A%20%20%7D%0A%0A%20%20let%20url%20=%20data.storePath%20%7C%7C%20data.imageUrl%20%7C%7C%20data;%0A%0A%20%20if%20(!url%20%7C%7C%20typeof%20url%20!==%20'string')%20%7B%20return%20'';%20%7D%0A%0A%20%20if%20(url.includes(';base64'))%20%7B%0A%20%20%20%20return%20url;%0A%20%20%7D%0A%0A%20%20if%20(url.startsWith('http')%20&&%20!url.startsWith(fileUrl))%20%7B%0A%20%20%20%20return%20url;%0A%20%20%7D%0A%0A%20%20if%20(url.startsWith('http')%20%7C%7C%20url.startsWith('/'))%20%7B%0A%20%20%20%20if%20(url.lastIndexOf('http')%20!=%200)%20%7B%0A%20%20%20%20%20%20const%20apiDomain%20=%20%60$%7BfileUrl%7D/%60;%0A%20%20%20%20%20%20url%20=%20url.replace(apiDomain,%20'');%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20extension%20=%20url.includes('.')%20&&%20url.substring(url.indexOf('.')%20+%201);%0A%0A%20%20%20%20if%20(extension%20&&%20extension.includes('/'))%20%7B%0A%20%20%20%20%20%20url%20=%20url.substring(0,%20url.lastIndexOf('/'));%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20url;%0A%20%20%7D%0A%0A%20%20//%20const%20protocol%20=%20'http://'%0A%20%20const%20protocol%20=%20'//';%20//%20use%20the%20current%20open%20web%20browser%20protocol%0A%0A%20%20const%20result%20=%20url.startsWith(fileHost)%20?%20%60$%7Bprotocol%7D$%7Burl%7D%60%20:%20%60$%7BfileUrl%7D/$%7Burl%7D%60;%0A%0A%20%20return%20result;%0A%7D%0A%0Afunction%20getBoxShadowStyle(styles,%20important)%20%7B%0A%20%20if%20(styles%20==%20null%20%7C%7C%20!styles?.enable)%20return%20null;%0A%0A%20%20const%20%7B%0A%20%20%20%20x,%20y,%20blur,%20spread,%20color,%20sizeUnit,%0A%20%20%7D%20=%20styles;%0A%0A%20%20const%20unit%20=%20sizeUnit%20&&%20sizeUnit.value%20?%20sizeUnit.value%20:%20'px';%0A%0A%20%20return%20%60$%7Bx%7D$%7Bunit%7D%20$%7By%7D$%7Bunit%7D%20$%7Bblur%7D$%7Bunit%7D%20$%7Bspread%7D$%7Bunit%7D%20$%7Bcolor%7D%20$%7Bimportant%20?%20'!important'%20:%20''%7D%60;%0A%7D%0A%0A//%20Temporary%20import%20to%20support%20web%20component%20MET-2174%0Afunction%20getBoPageUrl(page,%20%7B%20$config%20%7D)%20%7B%0A%20%20if%20(page%20&&%20!page.startsWith('/'))%20%7B%0A%20%20%20%20return%20%60$%7B$config.backOfficeUrl%7D/$%7Bpage.trim()%7D%60;%0A%20%20%7D%0A%0A%20%20return%20$config.backOfficeUrl%20+%20page.trim();%0A%7D%0A%0Afunction%20getBoSiteUrl(page,%20%7B%0A%20%20$config,%0A%7D%20=%20%7B%7D)%20%7B%0A%20%20let%20url%20=%20getBoPageUrl(page,%20%7B%20$config%20%7D);%0A%20%20if%20(!process.client)%20return%20url;%0A%0A%20%20const%20reqHost%20=%20window.location.hostname;%0A%20%20if%20(reqHost%20&&%20$config.baseSiteHost%20!=%20'localhost')%20%7B%0A%20%20%20%20let%20host%20=%20reqHost;%0A%20%20%20%20const%20rh%20=%20reqHost.split('.');%0A%20%20%20%20if%20(rh.length%20%3E%202)%20%7B%0A%20%20%20%20%20%20if%20(rh%5Brh.length%20-%201%5D.length%20==%203)%20%7B%0A%20%20%20%20%20%20%20%20host%20=%20%60$%7Brh%5Brh.length%20-%202%5D%7D.$%7Brh%5Brh.length%20-%201%5D%7D%60;%0A%20%20%20%20%20%20%7D%20else%20if%20(rh%5Brh.length%20-%201%5D.length%20==%202%20&&%20rh%5Brh.length%20-%202%5D.length%20==%202)%20%7B%0A%20%20%20%20%20%20%20%20host%20=%20%60$%7Brh%5Brh.length%20-%203%5D%7D.$%7Brh%5Brh.length%20-%202%5D%7D.$%7Brh%5Brh.length%20-%201%5D%7D%60;%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20host%20=%20%60$%7Brh%5Brh.length%20-%202%5D%7D.$%7Brh%5Brh.length%20-%201%5D%7D%60;%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20if%20($config.baseSiteHost%20!=%20host)%20%7B%0A%20%20%20%20%20%20url%20=%20url.replace($config.baseSiteHost,%20host);%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20return%20url;%0A%7D%0A%0A//%20Temporary%20import%20to%20support%20web%20component%20MET-2174%0A//%20import%20useIceStore%20from%20'~/stores/ice.store';%0A//%20Temporary%20comment%20store%0A%0Afunction%20isExternalUrl(value)%20%7B%0A%20%20return%20value%20&&%20%5B'http',%20'//',%20'mailto'%5D.some((i)%20=%3E%20value.startsWith(i));%0A%7D%0A%0Afunction%20getPageUrl(page,%20%7B%0A%20%20siteId,%0A%20%20$route,%0A%20%20$config,%0A%7D%20=%20%7B%7D,%20store)%20%7B%0A%20%20if%20(isExternalUrl(page))%20%7B%20return%20page;%20%7D%20//%20if%20external%20link%20return%20link%0A%0A%20%20const%20iceStore%20=%20store%20%7C%7C%20%7B%7D;%0A%0A%20%20page%20=%20page%20&&%20!page.startsWith('/')%20?%20%60/$%7Bpage%7D%60.trim()%20:%20page.trim();%20//%20check%20'/'%20exist%20or%20not%0A%0A%20%20let%20%5BurlPath,%20urlQuery%5D%20=%20page.split('?');%0A%20%20const%20urlParams%20=%20new%20URLSearchParams(urlQuery);%0A%0A%20%20for%20(const%20k%20in%20$route.query)%20%7B%0A%20%20%20%20if%20(!urlParams.has(k))%20%7B%0A%20%20%20%20%20%20urlParams.set(k,%20$route.query%5Bk%5D);%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20const%20implicitSiteId%20=%20$config.implicitSiteId;%0A%20%20const%20segments%20=%20urlPath.split('/').filter((i)%20=%3E%20i);%0A%20%20const%20firstSegment%20=%20segments%5B0%5D%20%7C%7C%20'';%0A%0A%20%20if%20(firstSegment%20&&%20implicitSiteId%20!=%20siteId%20&&%20firstSegment.toLowerCase()%20!=%20implicitSiteId)%20%7B%0A%20%20%20%20const%20listSiteIds%20=%20iceStore.listSiteIds;%0A%20%20%20%20if%20(listSiteIds%20&&%20!listSiteIds.includes(firstSegment))%20%7B%0A%20%20%20%20%20%20segments.unshift(siteId);%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20urlPath%20=%20%60/$%7Bsegments.join('/')%7D%60;%0A%0A%20%20const%20query%20=%20urlParams.toString();%0A%0A%20%20const%20url%20=%20urlPath%20+%20(query%20?%20%60?$%7Bquery%7D%60%20:%20'');%0A%0A%20%20return%20url;%0A%7D%0A%0Afunction%20makeAnchorId(text)%20%7B%0A%20%20return%20%60anchor_$%7Btext.replaceAll('%20',%20'_')%7D%60;%0A%7D%0A%0Afunction%20linkActionGetLinkType(linkProp)%20%7B%0A%20%20const%20linkType%20=%20linkProp?.linkType;%0A%20%20return%20linkType?.value%20%7C%7C%20undefined;%0A%7D%0A%0Aexport%20function%20linkActionGetLinkTarget(linkProp,%20$isApp)%20%7B%0A%20%20const%20linkTarget%20=%20linkProp?.linkTarget;%0A%20%20const%20targetValue%20=%20linkTarget?.value%20%7C%7C%20undefined;%0A%20%20return%20$isApp%20?%20'_self'%20:%20targetValue;%0A%7D%0A%0Aexport%20function%20linkActionGetLinkUrl(linkProp,%20%7B%0A%20%20siteId,%0A%20%20$route,%0A%20%20$config,%0A%7D)%20%7B%0A%20%20const%20linkType%20=%20linkActionGetLinkType(linkProp);%0A%20%20const%20linkValue%20=%20linkProp?.linkValue%20%7C%7C%20'';%0A%0A%20%20switch%20(linkType)%20%7B%0A%20%20%20%20case%20'anchor':%20%7B%0A%20%20%20%20%20%20const%20targetAnchor%20=%20linkProp?.targetAnchor;%0A%20%20%20%20%20%20return%20makeAnchorId(targetAnchor?.value%20%7C%7C%20'');%20%7D%0A%20%20%20%20case%20'email':%0A%20%20%20%20%20%20return%20%60mailto:$%7BlinkValue%7D%60;%0A%20%20%20%20case%20'phone':%0A%20%20%20%20%20%20return%20%60tel:$%7BlinkValue%7D%60;%0A%20%20%20%20case%20'bo':%0A%20%20%20%20%20%20return%20getBoSiteUrl(linkValue,%20%7B%20config%20%7D);%0A%20%20%20%20case%20'landingPage':%0A%20%20%20%20case%20'profilePage':%0A%20%20%20%20case%20'surveyPage':%20%7B%0A%20%20%20%20%20%20const%20pageUrl%20=%20linkProp?.page?.item?.url;%0A%20%20%20%20%20%20const%20urlValue%20=%20pageUrl?.value%20%7C%7C%20'';%0A%20%20%20%20%20%20return%20getPageUrl(urlValue,%20%7B%0A%20%20%20%20%20%20%20%20siteId,%0A%20%20%20%20%20%20%20%20$route,%0A%20%20%20%20%20%20%20%20$config,%0A%20%20%20%20%20%20%7D);%20%7D%0A%20%20%20%20//%20Deprecated,%20only%20support%20for%20old%20version%0A%20%20%20%20case%20'page':%20%7B%0A%20%20%20%20%20%20const%20page%20=%20linkProp?.page?.value%20%7C%7C%20'';%0A%20%20%20%20%20%20return%20getPageUrl(page,%20%7B%0A%20%20%20%20%20%20%20%20siteId,%0A%20%20%20%20%20%20%20%20$route,%0A%20%20%20%20%20%20%20%20$config,%0A%20%20%20%20%20%20%7D);%20%7D%0A%20%20%20%20case%20'url':%0A%20%20%20%20case%20'document':%0A%20%20%20%20%20%20return%20getPageUrl(linkValue,%20%7B%0A%20%20%20%20%20%20%20%20siteId,%0A%20%20%20%20%20%20%20%20$route,%0A%20%20%20%20%20%20%20%20$config,%0A%20%20%20%20%20%20%7D);%0A%20%20%20%20case%20'none':%0A%20%20%20%20%20%20return%20%60$%7B'javascript'%7D:void()%60;%0A%20%20%20%20default:%0A%20%20%20%20%20%20return%20'';%0A%20%20%7D%0A%7D%0Aexport%20function%20linkActionHasLinkSetting(linkProp)%20%7B%0A%20%20const%20linkType%20=%20linkActionGetLinkType(linkProp);%0A%20%20return%20linkType%20&&%20linkType%20!==%20'none';%0A%7D%0Aexport%20function%20trackingLinkClick(linkProp)%20%7B%0A%20%20if%20(!linkProp?.page)%20return;%0A%0A%20%20this.$axios.request(%7B%0A%20%20%20%20url:%20'/svc/service/click',%0A%20%20%20%20params:%20%7B%0A%20%20%20%20%20%20id:%20linkProp?.id,%0A%20%20%20%20%20%20page:%20linkActionGetLinkUrl(linkProp),%0A%20%20%20%20%7D,%0A%20%20%7D);%0A%7D%0Aexport%20function%20executeRedirectLink(linkProp,%20callback)%20%7B%0A%20%20if%20(this.$inEditor%20&&%20!this.$inPreview)%20return;%0A%0A%20%20trackingLinkClick(linkProp);%0A%20%20const%20url%20=%20linkActionGetLinkUrl(linkProp);%0A%20%20if%20(!url)%20return;%0A%0A%20%20const%20linkTarget%20=%20linkActionGetLinkTarget(linkProp);%0A%20%20window.open(url,%20linkTarget);%0A%0A%20%20if%20(callback)%20callback();%0A%7D%0A%0A%0Aexport%20default%20%7B%0A%20%20examples:%20%5B%0A%20%20%20%20%7B%0A%20%20%20%20%20%20image:%20'/common/img/background-01.jpeg',%0A%20%20%20%20%20%20imageMobile:%20'/common/img/background-02.png',%0A%20%20%20%20%20%20imageAction:%20%7B%0A%20%20%20%20%20%20%20%20link:%20%7B%0A%20%20%20%20%20%20%20%20%20%20linkType:%20'page',%0A%20%20%20%20%20%20%20%20%20%20linkTarget:%20'_blank',%0A%20%20%20%20%20%20%20%20%20%20linkValue:%20'https://dev.justten.io/ice/',%0A%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20alt:%20'ICE%20Image%20supports%20different%20image%20for%20mobile%20and%20desktop%20and%20open%20link%20action',%0A%20%20%20%20%20%20docName:%20'Support%20different%20image%20for%20mobile%20and%20desktop%20and%20open%20link%20action',%0A%20%20%20%20%7D,%0A%20%20%20%20%7B%0A%20%20%20%20%20%20docName:%20'Default%20placeholder%20when%20there%20is%20no%20image%20provided',%0A%20%20%20%20%7D,%0A%20%20%20%20%7B%0A%20%20%20%20%20%20image:%20'/common/img/not_exist_image.png',%0A%20%20%20%20%20%20alt:%20'ICE%20Image%20Error%20Placeholder',%0A%20%20%20%20%20%20docName:%20'Default%20error%20image%20when%20it%20is%20failed%20to%20display',%0A%20%20%20%20%7D,%0A%20%20%5D,%0A%20%20props:%20%7B%0A%20%20%20%20image:%20%7B%0A%20%20%20%20%20%20type:%20%5BString,%20Object%5D,%0A%20%20%20%20%20%20default:%20'',%0A%20%20%20%20%20%20doc:%20%7B%0A%20%20%20%20%20%20%20%20type:%20String,%0A%20%20%20%20%20%20%20%20default:%20'/common/img/background-01.jpeg',%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%7D,%0A%20%20%20%20imageMobile:%20%7B%0A%20%20%20%20%20%20type:%20%5BString,%20Object%5D,%0A%20%20%20%20%20%20default:%20'',%0A%20%20%20%20%20%20doc:%20%7B%0A%20%20%20%20%20%20%20%20hidden:%20true,%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%7D,%0A%20%20%20%20imageUrl:%20%7B%0A%20%20%20%20%20%20type:%20String,%0A%20%20%20%20%20%20default:%20'',%0A%20%20%20%20%7D,%0A%20%20%20%20imageMobileUrl:%20%7B%0A%20%20%20%20%20%20type:%20String,%0A%20%20%20%20%20%20default:%20'',%0A%20%20%20%20%7D,%0A%20%20%20%20opacity:%20%7B%0A%20%20%20%20%20%20type:%20%5BNumber,%20Object%5D,%0A%20%20%20%20%20%20default:%20()%20=%3E%20(%7B%0A%20%20%20%20%20%20%20%20opacity:%2010,%0A%20%20%20%20%20%20%7D),%0A%20%20%20%20%7D,%0A%20%20%20%20alt:%20%7B%0A%20%20%20%20%20%20type:%20String,%0A%20%20%20%20%20%20default:%20'',%0A%20%20%20%20%7D,%0A%20%20%20%20imageStyle:%20%7B%0A%20%20%20%20%20%20type:%20Object,%0A%20%20%20%20%20%20default:%20()%20=%3E%20(%7B%0A%20%20%20%20%20%20%20%20borderStyle:%20%7B%0A%20%20%20%20%20%20%20%20%20%20enable:%20false,%0A%20%20%20%20%20%20%20%20%20%20type:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20value:%20'solid',%0A%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20shadowStyle:%20%7B%7D,%0A%20%20%20%20%20%20%20%20grow:%20false,%0A%20%20%20%20%20%20%20%20backgroundColor:%20'',%0A%20%20%20%20%20%20%20%20objectFit:%20'none',%0A%20%20%20%20%20%20%7D),%0A%20%20%20%20%20%20doc:%20%7B%0A%20%20%20%20%20%20%20%20options:%20%7B%0A%20%20%20%20%20%20%20%20%20%20borderStyle:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type:%20Object,%0A%20%20%20%20%20%20%20%20%20%20%20%20doc:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20options:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20enable:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type:%20Boolean,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20color:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type:%20String,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20size:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type:%20Number,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type:%20String,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20doc:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20component:%20'Select',%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20list:%20%5B%7B%20value:%20'solid',%20label:%20'Solid'%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20value:%20'dotted',%20label:%20'Dotted'%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20value:%20'dashed',%20label:%20'Dashed'%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20value:%20'double',%20label:%20'Double'%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20value:%20'groove',%20label:%20'Groove'%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20value:%20'ridge',%20label:%20'Ridge'%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20value:%20'inset',%20label:%20'Inset'%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20value:%20'outset',%20label:%20'Outset'%20%7D%5D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20shadowStyle:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type:%20Object,%0A%20%20%20%20%20%20%20%20%20%20%20%20doc:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20options:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20enable:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type:%20Boolean,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20color:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type:%20String,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blur:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type:%20Number,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20x:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type:%20Number,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20y:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20type:%20Number,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%20%20radius:%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20type:%20Number,%0A%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%7D,%0A%20%20%20%20imageAction:%20%7B%0A%20%20%20%20%20%20type:%20Object,%0A%20%20%20%20%20%20default:%20()%20=%3E%20(%7B%0A%20%20%20%20%20%20%20%20enlargerView:%20false,%0A%20%20%20%20%20%20%7D),%0A%20%20%20%20%7D,%0A%20%20%20%20layout:%20%7B%0A%20%20%20%20%20%20type:%20Object,%0A%20%20%20%20%20%20default:%20()%20=%3E%20(%7B%7D),%0A%20%20%20%20%20%20doc:%20%7B%0A%20%20%20%20%20%20%20%20hidden:%20true,%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%7D,%0A%20%20%20%20styles:%20%7B%0A%20%20%20%20%20%20type:%20Object,%0A%20%20%20%20%20%20default:%20()%20=%3E%20(%7B%7D),%0A%20%20%20%20%20%20doc:%20%7B%0A%20%20%20%20%20%20%20%20hidden:%20true,%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%7D,%0A%20%20%20%20imageLayout:%20%7B%0A%20%20%20%20%20%20type:%20Object,%0A%20%20%20%20%20%20default:%20()%20=%3E%20(%7B%7D),%0A%20%20%20%20%20%20doc:%20%7B%0A%20%20%20%20%20%20%20%20hidden:%20true,%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%7D,%0A%20%20%20%20useFullWidth:%20%7B%0A%20%20%20%20%20%20type:%20Boolean,%0A%20%20%20%20%20%20default:%20false,%0A%20%20%20%20%7D,%0A%20%20%20%20appConfig:%20%7B%0A%20%20%20%20%20%20type:%20Object,%0A%20%20%20%20%20%20default:%20()%20=%3E%20(%7B%7D),%0A%20%20%20%20%7D,%0A%20%20%20%20store:%20%7B%0A%20%20%20%20%20%20type:%20Object,%0A%20%20%20%20%20%20default:%20()%20=%3E%20(%7B%7D),%0A%20%20%20%20%7D,%0A%20%20%20%20link:%20%7B%0A%20%20%20%20%20%20type:%20Object,%0A%20%20%20%20%20%20default:%20null,%0A%20%20%20%20%20%20doc:%20%7B%0A%20%20%20%20%20%20%20%20hidden:%20true,%0A%20%20%20%20%20%20%7D,%0A%20%20%20%20%7D,%0A%20%20%7D,%0A%20%20emits:%20%5B'willReady',%20'didReady'%5D,%0A%20%20data()%20%7B%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20errorSrc:%20'',%0A%20%20%20%20%7D;%0A%20%20%7D,%0A%0A%20%20computed:%20%7B%0A%20%20%20%20config()%20%7B%0A%20%20%20%20%20%20return%20this.appConfig?.$config%20%7C%7C%20this.$config;%0A%20%20%20%20%7D,%0A%20%20%20%20route()%20%7B%0A%20%20%20%20%20%20return%20this.appConfig?.$route%20%7C%7C%20this.$route;%0A%20%20%20%20%7D,%0A%20%20%20%20siteId()%20%7B%0A%20%20%20%20%20%20return%20this.appConfig?.siteId%20%7C%7C%20this.$$siteId;%0A%20%20%20%20%7D,%0A%20%20%20%20defaultImage()%20%7B%0A%20%20%20%20%20%20return%20this.config.image_default;%0A%20%20%20%20%7D,%0A%20%20%20%20imgAlt()%20%7B%0A%20%20%20%20%20%20return%20this.alt;%0A%20%20%20%20%7D,%0A%20%20%20%20imgSrc()%20%7B%0A%20%20%20%20%20%20if%20(this.errorSrc)%20%7B%0A%20%20%20%20%20%20%20%20return%20this.errorSrc;%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(this.$$isMobile%20%7C%7C%20!(this.image%20%7C%7C%20this.imageUrl))%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.imageMobile)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20getFileUrl(this.imageMobile,%20%7B%20$config:%20this.config%20%7D);%0A%20%20%20%20%20%20%20%20%7D%20if%20(this.imageMobileUrl)%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20this.imageMobileUrl;%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20getFileUrl(this.image,%20%7B%20$config:%20this.config%20%7D)%20%7C%7C%20this.imageUrl;%0A%20%20%20%20%7D,%0A%20%20%20%20holderStyle()%20%7B%0A%20%20%20%20%20%20return%20%7B%20position:%20'absolute'%20%7D;%0A%20%20%20%20%7D,%0A%20%20%20%20imgClass()%20%7B%0A%20%20%20%20%20%20const%20classes%20=%20%5B%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20'cursor-pointer':%20this.isEnlargerView,%0A%20%20%20%20%20%20%20%20%20%20ice_image_full_width:%20this.useFullWidth,%0A%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%5D;%0A%0A%20%20%20%20%20%20const%20grow%20=%20this.imageStyle?.grow;%0A%0A%20%20%20%20%20%20if%20(grow)%20%7B%0A%20%20%20%20%20%20%20%20classes.push('ice_image_grow');%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20return%20classes;%0A%20%20%20%20%7D,%0A%20%20%20%20imgAction()%20%7B%0A%20%20%20%20%20%20return%20this.imageAction?.link;%0A%20%20%20%20%7D,%0A%20%20%20%20placeholderStyles()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20width:%20this.layout?.width,%0A%20%20%20%20%20%20%20%20height:%20this.layout?.height,%0A%20%20%20%20%20%20%20%20objectFit:%20'none',%0A%20%20%20%20%20%20%20%20backgroundColor:%20'#D4D4D4',%0A%20%20%20%20%20%20%7D;%0A%20%20%20%20%7D,%0A%20%20%20%20imgStyle()%20%7B%0A%20%20%20%20%20%20const%20opacity%20=%20this.opacity?.opacity%20%7C%7C%20this.opacity%20%7C%7C%2010;%0A%20%20%20%20%20%20const%20borderStyle%20=%20this.imageStyle?.borderStyle%20%7C%7C%20%7B%7D;%0A%20%20%20%20%20%20const%20enableBorder%20=%20borderStyle.enable%20%7C%7C%20false;%0A%20%20%20%20%20%20const%20shadowStyle%20=%20this.imageStyle?.shadowStyle%20%7C%7C%20%7B%7D;%0A%20%20%20%20%20%20const%20borderRadius%20=%20this.imageStyle?.radius%20%7C%7C%20null;%0A%20%20%20%20%20%20const%20background%20=%20this.imageStyle?.backgroundColor%20%7C%7C%20null;%0A%20%20%20%20%20%20const%20borderType%20=%20borderStyle?.type?.value%20%7C%7C%20'solid';%0A%20%20%20%20%20%20const%20width%20=%20this.layout?.width;%0A%20%20%20%20%20%20const%20height%20=%20this.layout?.height;%0A%0A%20%20%20%20%20%20const%20%7B%20color,%20size%20%7D%20=%20borderStyle;%0A%0A%20%20%20%20%20%20const%20border%20=%20enableBorder%20?%20%60$%7Bsize%7Dpx%20$%7BborderType%7D%20$%7Bcolor%7D%20!important%60%20:%20null;%0A%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20opacity:%20opacity%20/%2010,%0A%20%20%20%20%20%20%20%20borderRadius:%20borderRadius%20!=%20null%20?%20%60$%7BborderRadius%7Dpx%60%20:%20null,%0A%20%20%20%20%20%20%20%20background,%0A%20%20%20%20%20%20%20%20width,%0A%20%20%20%20%20%20%20%20height,%0A%20%20%20%20%20%20%20%20border,%0A%20%20%20%20%20%20%20%20boxShadow:%20getBoxShadowStyle(shadowStyle),%0A%20%20%20%20%20%20%20%20display:%20'inline-block',%0A%20%20%20%20%20%20%7D;%0A%20%20%20%20%7D,%0A%20%20%20%20divStyle()%20%7B%0A%20%20%20%20%20%20const%20styles%20=%20this.imageLayout;%0A%20%20%20%20%20%20const%20textAlign%20=%20styles?.textAlign;%0A%20%20%20%20%20%20const%20display%20=%20styles?.display;%0A%20%20%20%20%20%20const%20horizontalAlign%20=%20textAlign?.value%20%7C%7C%20'center';%0A%20%20%20%20%20%20const%20displayMethod%20=%20display?.value%20%7C%7C%20'block';%0A%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20display:%20displayMethod,%0A%20%20%20%20%20%20%20%20textAlign:%20horizontalAlign,%0A%20%20%20%20%20%20%20%20position:%20'relative',%0A%20%20%20%20%20%20%7D;%0A%20%20%20%20%7D,%0A%20%20%20%20hrefLink()%20%7B%0A%20%20%20%20%20%20const%20test%20=%20linkActionGetLinkUrl(this.imgAction,%20this.appConfig);%0A%20%20%20%20%20%20return%20test;%0A%20%20%20%20%7D,%0A%20%20%20%20hrefLinkTarget()%20%7B%0A%20%20%20%20%20%20return%20linkActionGetLinkTarget(this.imgAction,%20this.$$isApp);%0A%20%20%20%20%7D,%0A%20%20%20%20isEnlargerView()%20%7B%0A%20%20%20%20%20%20return%20this.imageAction?.enlargerView%20%7C%7C%20false;%0A%20%20%20%20%7D,%0A%20%20%20%20isRoutePush()%20%7B%0A%20%20%20%20%20%20return%20linkActionGetLinkType(this.imgAction)%20===%20'page'%20&&%20(!this.hrefLinkTarget%20%7C%7C%20!this.hrefLinkTarget%20===%20'_self');%0A%20%20%20%20%7D,%0A%20%20%7D,%0A%20%20mounted()%20%7B%0A%20%20%20%20this.$emit('willReady');%0A%20%20%7D,%0A%20%20created()%20%7B%0A%20%20%20%20this.$emit('willReady');%0A%20%20%7D,%0A%20%20methods:%20%7B%0A%20%20%20%20onImageLoad(e)%20%7B%0A%20%20%20%20%20%20const%20el%20=%20e.target%20%7C%7C%20e.path%5B0%5D;%0A%0A%20%20%20%20%20%20if%20(el%20&&%20el.naturalHeight%20%3C=%201%20&&%20el.naturalHeight%20%3C=%201)%20%7B%0A%20%20%20%20%20%20%20%20this.errorSrc%20=%20this.config.image_error;%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this.$emit('didReady');%0A%20%20%20%20%7D,%0A%20%20%20%20onImageError(e)%20%7B%0A%20%20%20%20%20%20const%20el%20=%20e.target%20%7C%7C%20e.path%5B0%5D;%0A%0A%20%20%20%20%20%20if%20(el%20&&%20el.naturalHeight%20%3C=%201%20&&%20el.naturalHeight%20%3C=%201)%20%7B%0A%20%20%20%20%20%20%20%20this.errorSrc%20=%20this.config.image_error;%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this.$emit('didReady');%0A%20%20%20%20%7D,%0A%20%20%20%20//%20Not%20support%20web%20component%20yet%0A%20%20%20%20openModal()%20%7B%0A%20%20%20%20%20%20if%20(!this.isEnlargerView)%20%7B%0A%20%20%20%20%20%20%20%20return;%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20this.$modal.show(%7B%0A%20%20%20%20%20%20%20%20component:%20'Reg-DefaultImagePreviewModal',%0A%20%20%20%20%20%20%20%20props:%20%7B%0A%20%20%20%20%20%20%20%20%20%20src:%20this.imgSrc,%0A%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20wrapperProps:%20%7B%0A%20%20%20%20%20%20%20%20%20%20noStyle:%20true,%0A%20%20%20%20%20%20%20%20%20%20clickCloseOutside:%20true,%0A%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D,%0A%20%20%20%20routePush()%20%7B%0A%20%20%20%20%20%20this.$router.push(%7B%0A%20%20%20%20%20%20%20%20path:%20getPageUrl(%0A%20%20%20%20%20%20%20%20%20%20this.hrefLink,%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20siteId:%20unref(this.siteId),%0A%20%20%20%20%20%20%20%20%20%20%20%20$route:%20this.route,%0A%20%20%20%20%20%20%20%20%20%20%20%20$config:%20this.config,%0A%20%20%20%20%20%20%20%20%20%20%20%20store:%20this.store,%0A%20%20%20%20%20%20%20%20%20%20%7D,%0A%20%20%20%20%20%20%20%20),%0A%20%20%20%20%20%20%7D);%0A%20%20%20%20%7D,%0A%20%20%7D,%0A%7D;%0A%3C/script%3E%0A
`

const options = {
  moduleCache: {
    vue: Vue
  },
  async getFile(url) {
    if (url == 'Image.vue') {
      return Promise.resolve(decodeURI(componentSource));
    }

    const res = await fetch(url);

    if (!res.ok) {
      throw Object.assign(new Error(res.statusText + ' ' + url), { res });
    }

    return {
      getContentData: asBinary => asBinary ? res.arrayBuffer() : res.text(),
    }
  },
  addStyle(textContent) {
    const style = Object.assign(document.createElement('style'), { textContent });
    const ref = document.head.getElementsByTagName('style')[0] || null;
    document.head.insertBefore(style, ref);
  },
}

const componentName = 'IceWebImage'
const componentCode = Vue.defineCustomElement(await loadModule('Image.vue', options))

function kebabCase(str) {
  return str.replace(/[A-Z]+(?![a-z])|[A-Z]/g, ($, ofs) => (ofs ? '-' : '') + $.toLowerCase());
}

Vue.createApp({
  setup() {
    // Register as Web Components
    window.customElements.define(kebabCase(componentName), componentCode)
    
    return {}
  },
}).mount(document.createElement('div'));
})();